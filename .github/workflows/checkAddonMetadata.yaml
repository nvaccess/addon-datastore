name: Check submitted NVDA add-on

on:
  pull_request:
    branches:
      - master

jobs:

  checkMetadata:
  
    runs-on: windows-latest

    steps:
    
    - name: Checkout code
      uses: actions/checkout@v2
      with:
        fetch-depth: 0
        submodules: true
    - name: Determine files changed
      uses: actions/github-script@v3
      with:
        script: |
          const restPrefix = "GET /repos/"
          const owner = context.repo.owner
          const repo = context.repo.repo
          const number = context.issue.number
          restSubfix = "/files"
          const url = restPrefix + owner + "/" + repo + "/pulls/" + number + restSubfix
          result files =await github.request(url)
          const changedFiles = result.data
          if (data.length === 1) {
            return result.data[0]
          } else {
            console.log(result.data[0])
          }
          
